"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[850],{5899:function(e,s,t){t.d(s,{Z:function(){return Input}});var a=t(5893);function Input(e){let{label:s,placeholder:t,width:l="w-72",divClassName:n,className:r,...i}=e;return(0,a.jsxs)("div",{className:n,children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-400",children:s}),(0,a.jsx)("input",{type:"text",className:"mt-1 ".concat(l," border border-white/5 bg-slate-800/75 py-2.5 px-4 text-sm placeholder-slate-500 ").concat(r),placeholder:t,...i})]})}},2077:function(e,s,t){t.d(s,{Z:function(){return Select}});var a=t(5893);function Select(e){let{label:s,placeholder:t,children:l,...n}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-400",children:s}),(0,a.jsxs)("select",{required:!0,className:"mt-1 w-72 border border-white/5 bg-slate-800/75 py-2.5 px-4 text-sm invalid:text-slate-500",...n,children:[(0,a.jsx)("option",{value:-1,disabled:!0,children:t}),l]})]})}},5834:function(e,s,t){t.d(s,{Z:function(){return TableData}});var a=t(5893);function TableData(e){let{children:s,className:t}=e;return(0,a.jsx)("td",{className:"py-4 px-4 ".concat(t),children:s})}},744:function(e,s,t){t.d(s,{Z:function(){return TableHeader}});var a=t(5893);function TableHeader(e){let{children:s}=e;return(0,a.jsx)("th",{className:"py-4 px-4 text-left text-xs font-semibold uppercase tracking-wider text-slate-400",children:s})}},5850:function(e,s,t){t.d(s,{R:function(){return UserCreator},h:function(){return UserEditor}});var a=t(5893),l=t(5899),n=t(2077),r=t(7294),i=t(5012),c=t(5349),d=t(5834),o=t(744),x=t(1881),m=t(5948);function UserCreator(e){let{onSubmit:s}=e;return(0,a.jsx)(UserForm,{initialName:"",initialCategories:[],initialDisallowedTasks:[],initialTasks:[],handleSubmit:s,buttonText:"Create User"})}function UserEditor(e){let{user:s,onSubmit:t}=e;return(0,a.jsx)(UserForm,{initialName:s.name,initialCategories:s.categories,initialDisallowedTasks:s.task_blacklist,initialTasks:s.preferences,handleSubmit:t,buttonText:"Save User"})}function UserForm(e){let{initialName:s,initialCategories:t,initialDisallowedTasks:i,initialTasks:c,handleSubmit:d,buttonText:h}=e,[p,u]=(0,r.useState)(1),[j,f,v]=(0,x.Z)(),[g,b]=(0,r.useState)(s),[N,k]=(0,r.useState)(-1),[y,S]=(0,r.useState)(t),[w,C]=(0,r.useState)(""),[T,Z]=(0,r.useState)(i),[R,D]=(0,r.useState)(-1),[A,I]=(0,r.useState)(c),handleSaveAllocation=(e,s)=>{S(t=>t.map(t=>t.id===e?{id:t.id,percentage:s}:t))},handleRemoveAllocation=e=>{S(s=>s.filter(s=>s.id!==e))},handleToggleTaskAllowed=e=>{T.includes(e)?Z(s=>s.filter(s=>s!==e)):Z(s=>[...s,e])},handleRemoveTask=e=>{I(s=>s.filter(s=>parseInt(s)!==parseInt(e)))};return(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsxs)("div",{className:"flex space-x-8",children:[(0,a.jsx)(Step,{id:1,currentStep:p,children:"Basic details"}),(0,a.jsx)(Step,{id:2,currentStep:p,children:"Task categories"}),(0,a.jsx)(Step,{id:3,currentStep:p,children:"Possible tasks"}),(0,a.jsx)(Step,{id:4,currentStep:p,children:"Task preferences"})]}),(0,a.jsxs)("div",{className:"mt-12",children:[1===p&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l.Z,{label:"Name",placeholder:"John Smith",value:g,onChange:e=>b(e.target.value)})}),2===p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-slate-300",children:"Some description about what task categories are, why they are assigned, etc."}),(0,a.jsxs)("div",{className:"mt-12 flex space-x-40",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Selected categories"}),(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-4",children:[(0,a.jsx)(n.Z,{placeholder:"Select...",value:N,onChange:e=>k(e.target.value),children:j.categories.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,a.jsx)("button",{className:"border py-2 px-2 hover:underline",onClick:e=>{if(e.preventDefault(),y.includes(e=>e.id===parseInt(N))){k(-1);return}S(e=>[...e,{id:parseInt(N),percentage:0}]),k(-1)},children:"Add"})]}),(0,a.jsxs)("div",{className:"mt-8 min-h-[176px] border",children:[0===y.length&&(0,a.jsx)("div",{className:"flex h-[176px] w-full items-center justify-center",children:(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Select categories to be allocated."})}),y.map(e=>(0,a.jsx)(CategoryAllocationRow,{category:e,categories:j.categories,onSave:handleSaveAllocation,onRemove:handleRemoveAllocation},e.id))]}),(0,a.jsxs)("p",{className:"mt-8 text-sm text-slate-500",children:["This user has"," ",y.map(e=>parseInt(e.percentage)).reduce((e,s)=>e+s,0),"% of their tasks allocated to categories.",(0,a.jsx)("br",{}),"Any remaining space will be filled by tasks outside of the specified categories."]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Create category"}),(0,a.jsx)("p",{className:"text-slate-300",children:"Tasks can be added to a newly created category later."}),(0,a.jsx)(l.Z,{label:"Name",placeholder:"Some category",divClassName:"mt-8",value:w,onChange:e=>C(e.target.value)}),(0,a.jsx)("button",{className:"mt-8 border p-2 hover:underline",onClick:e=>{e.preventDefault(),f({type:"ADD_CATEGORY",name:w}),C("")},children:"Create"})]})]})]}),3===p&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("table",{className:"mt-4 w-1/2 divide-y-2 divide-slate-600 border border-slate-600",children:[(0,a.jsx)("thead",{className:"bg-slate-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)(o.Z,{children:"Task"}),(0,a.jsx)(o.Z,{children:"Allowed"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-600",children:j.tasks.map(e=>(0,a.jsx)(TaskRow,{task:e,isDisallowed:T.includes(e.id),onToggle:handleToggleTaskAllowed},e.id))})]})}),4===p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"font-medium",children:"Task preferences"}),(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-4",children:[(0,a.jsx)(n.Z,{placeholder:"Select...",value:R,onChange:e=>D(e.target.value),children:j.tasks.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,a.jsx)("button",{className:"border py-2 px-2 hover:underline",onClick:e=>{if(e.preventDefault(),A.includes(R)){D(-1);return}I(e=>[...e,R]),D(-1)},children:"Add"})]}),(0,a.jsx)("div",{className:"mt-4",children:0===A.length?(0,a.jsx)("p",{className:"text-sm text-slate-300",children:"There are currently no tasks preferences."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z5,{onDragEnd:e=>{if(!e.destination||e.destination.index===e.source.index)return;let s=Array.from(A),[t]=s.splice(e.source.index,1);s.splice(e.destination.index,0,t),I(s)},children:(0,a.jsxs)("table",{className:"w-2/3 divide-y-2 divide-slate-600 border border-slate-600",children:[(0,a.jsx)("thead",{className:"bg-slate-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)(o.Z,{children:"Rank"}),(0,a.jsx)(o.Z,{children:"Task"}),(0,a.jsx)(o.Z,{})]})}),(0,a.jsx)(m.bK,{droppableId:"table",children:e=>(0,a.jsxs)("tbody",{className:"divide-y divide-slate-600",ref:e.innerRef,...e.droppableProps,children:[A.map((e,s)=>(0,a.jsx)(m._l,{draggableId:e.toString(),index:s,children:(t,l)=>(0,a.jsx)(PreferenceRow,{rank:s+1,task:j.tasks.find(s=>s.id===parseInt(e)),onRemove:handleRemoveTask,provided:t,snapshot:l})},e.toString())),e.placeholder]})})]})}),(0,a.jsx)("p",{className:"mt-8 text-sm text-slate-500",children:"Click and drag tasks into preference order."})]})})]}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),p<4?u(p+1):d(g,T,A,y)},className:"mt-12 border py-2 px-2 hover:underline",children:4===p?h:"Continue"})]})]})}function CategoryAllocationRow(e){let{category:s,categories:t,onSave:n,onRemove:d}=e,[o,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)(s.percentage);return(0,a.jsxs)("div",{className:"flex items-center justify-between border px-6 py-4",children:[(0,a.jsx)("p",{children:t.find(e=>e.id===parseInt(s.id)).name}),o?(0,a.jsxs)("div",{className:"inline-flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Z,{className:"block",width:"w-28",value:m,onChange:e=>h(e.target.value)}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 mt-1 flex items-center pr-3",children:(0,a.jsx)("span",{className:"text-sm text-slate-400",children:"%"})})]}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),n(s.id,m),x(!1)},children:(0,a.jsx)(i.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),d(s.id)},children:(0,a.jsx)(c.Z,{className:"h-5 w-5"})})]}):(0,a.jsxs)("button",{className:"text-sm underline",onClick:e=>x(!0),children:[s.percentage,"%"]})]})}function TaskRow(e){let{task:s,isDisallowed:t,onToggle:l}=e;return(0,a.jsxs)("tr",{children:[(0,a.jsxs)(d.Z,{className:"flex flex-col items-start space-y-1",children:[(0,a.jsx)("p",{children:s.name}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:s.description})]}),(0,a.jsx)(d.Z,{children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("button",{className:"text-sm underline",onClick:e=>{e.preventDefault(),l(s.id)},children:t?"No":"Yes"})})})]})}function PreferenceRow(e){let{rank:s,task:t,onRemove:l,provided:n,snapshot:r}=e;return(0,a.jsxs)("tr",{ref:n.innerRef,className:r.isDragging?"table":"",...n.draggableProps,...n.dragHandleProps,children:[(0,a.jsx)(d.Z,{className:"w-24",children:(0,a.jsx)("span",{className:"bg-slate-800 py-1 px-2 text-xs font-medium uppercase tracking-wider",children:(0,a.jsx)("code",{children:s})})}),(0,a.jsxs)(d.Z,{className:"flex flex-col items-start space-y-1",children:[(0,a.jsx)("p",{children:t.name}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:t.description})]}),(0,a.jsx)(d.Z,{children:(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{className:"text-sm hover:underline",onClick:e=>{e.preventDefault(),l(t.id)},children:"Remove"})})})]})}function Step(e){let{id:s,children:t,currentStep:l}=e,n=s<=l;return(0,a.jsxs)("div",{className:"flex-1 border-t-4 ".concat(n?"border-slate-400":"border-slate-600"," py-4"),children:[(0,a.jsxs)("p",{className:"text-sm font-medium ".concat(n?"text-slate-400":"text-slate-500"),children:["Step ",s]}),(0,a.jsx)("p",{className:"font-medium ".concat(n?"text-slate-300":"text-slate-400"),children:t})]})}}}]);