"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{4491:function(e,s,t){t.d(s,{Z:function(){return n}});var a=t(5893);function n(e){let{label:s,placeholder:t,width:n="w-72",divClassName:l,className:i,...r}=e;return(0,a.jsxs)("div",{className:l,children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-400",children:s}),(0,a.jsx)("input",{type:"text",className:"mt-1 ".concat(n," border border-white/5 bg-slate-800/75 py-2.5 px-4 text-sm placeholder-slate-500 ").concat(i),placeholder:t,...r})]})}},4523:function(e,s,t){t.d(s,{Z:function(){return n}});var a=t(5893);function n(e){let{label:s,placeholder:t,children:n,...l}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-400",children:s}),(0,a.jsxs)("select",{required:!0,className:"mt-1 w-72 border border-white/5 bg-slate-800/75 py-2.5 px-4 text-sm invalid:text-slate-500",...l,children:[(0,a.jsx)("option",{value:-1,disabled:!0,children:t}),n]})]})}},1044:function(e,s,t){t.d(s,{Z:function(){return n}});var a=t(5893);function n(e){let{children:s,className:t}=e;return(0,a.jsx)("td",{className:"py-4 px-4 ".concat(t),children:s})}},668:function(e,s,t){t.d(s,{Z:function(){return n}});var a=t(5893);function n(e){let{children:s}=e;return(0,a.jsx)("th",{className:"py-4 px-4 text-left text-xs font-semibold uppercase tracking-wider text-slate-400",children:s})}},5545:function(e,s,t){t.d(s,{R:function(){return h},h:function(){return u}});var a=t(5893),n=t(4491),l=t(4523),i=t(7294),r=t(5530),c=t(3967),d=t(1044),x=t(668),o=t(6723),m=t(5948);function h(e){let{onSubmit:s}=e;return(0,a.jsx)(p,{initialName:"",initialCategories:[],initialDisallowedTasks:[],initialTasks:[],handleSubmit:s,buttonText:"Create User"})}function u(e){let{user:s,onSubmit:t}=e;return(0,a.jsx)(p,{initialName:s.name,initialCategories:s.categories,initialDisallowedTasks:s.task_blacklist,initialTasks:s.preferences,handleSubmit:t,buttonText:"Save User"})}function p(e){let{initialName:s,initialCategories:t,initialDisallowedTasks:r,initialTasks:c,handleSubmit:d,buttonText:h}=e,[u,p]=(0,i.useState)(1),[b,g,k]=(0,o.Z)(),[y,S]=(0,i.useState)(s),[w,C]=(0,i.useState)(-1),[Z,T]=(0,i.useState)(t),[D,I]=(0,i.useState)(""),[R,A]=(0,i.useState)(r),[_,F]=(0,i.useState)(-1),[E,P]=(0,i.useState)(c),U=e=>{if(e.preventDefault(),Z.includes(e=>e.id===parseInt(w))){C(-1);return}T(e=>[...e,{id:parseInt(w),percentage:0}]),C(-1)},Y=(e,s)=>{T(t=>t.map(t=>t.id===e?{id:t.id,percentage:s}:t))},q=e=>{T(s=>s.filter(s=>s.id!==e))},B=e=>{R.includes(e)?A(s=>s.filter(s=>s!==e)):A(s=>[...s,e])},G=e=>{if(e.preventDefault(),E.includes(_)){F(-1);return}P(e=>[...e,_]),F(-1)},H=e=>{P(s=>s.filter(s=>parseInt(s)!==parseInt(e)))};return(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsxs)("div",{className:"flex space-x-8",children:[(0,a.jsx)(N,{id:1,currentStep:u,children:"Basic details"}),(0,a.jsx)(N,{id:2,currentStep:u,children:"Task categories"}),(0,a.jsx)(N,{id:3,currentStep:u,children:"Possible tasks"}),(0,a.jsx)(N,{id:4,currentStep:u,children:"Task preferences"})]}),(0,a.jsxs)("div",{className:"mt-12",children:[1===u&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.Z,{label:"Name",placeholder:"John Smith",value:y,onChange:e=>S(e.target.value)})}),2===u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-slate-300",children:"Some description about what task categories are, why they are assigned, etc."}),(0,a.jsxs)("div",{className:"mt-12 flex space-x-40",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Selected categories"}),(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-4",children:[(0,a.jsx)(l.Z,{placeholder:"Select...",value:w,onChange:e=>C(e.target.value),children:b.categories.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,a.jsx)("button",{className:"border py-2 px-2 hover:underline",onClick:U,children:"Add"})]}),(0,a.jsxs)("div",{className:"mt-8 min-h-[176px] border",children:[0===Z.length&&(0,a.jsx)("div",{className:"flex h-[176px] w-full items-center justify-center",children:(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Select categories to be allocated."})}),Z.map(e=>(0,a.jsx)(j,{category:e,categories:b.categories,onSave:Y,onRemove:q},e.id))]}),(0,a.jsxs)("p",{className:"mt-8 text-sm text-slate-500",children:["This user has"," ",Z.map(e=>parseInt(e.percentage)).reduce((e,s)=>e+s,0),"% of their tasks allocated to categories.",(0,a.jsx)("br",{}),"Any remaining space will be filled by tasks outside of the specified categories."]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Create category"}),(0,a.jsx)("p",{className:"text-slate-300",children:"Tasks can be added to a newly created category later."}),(0,a.jsx)(n.Z,{label:"Name",placeholder:"Some category",divClassName:"mt-8",value:D,onChange:e=>I(e.target.value)}),(0,a.jsx)("button",{className:"mt-8 border p-2 hover:underline",onClick:e=>{e.preventDefault(),g({type:"ADD_CATEGORY",name:D}),I("")},children:"Create"})]})]})]}),3===u&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("table",{className:"mt-4 w-1/2 divide-y-2 divide-slate-600 border border-slate-600",children:[(0,a.jsx)("thead",{className:"bg-slate-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)(x.Z,{children:"Task"}),(0,a.jsx)(x.Z,{children:"Allowed"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-600",children:b.tasks.map(e=>(0,a.jsx)(f,{task:e,isDisallowed:R.includes(e.id),onToggle:B},e.id))})]})}),4===u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"font-medium",children:"Task preferences"}),(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-4",children:[(0,a.jsx)(l.Z,{placeholder:"Select...",value:_,onChange:e=>F(e.target.value),children:b.tasks.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,a.jsx)("button",{className:"border py-2 px-2 hover:underline",onClick:G,children:"Add"})]}),(0,a.jsx)("div",{className:"mt-4",children:0===E.length?(0,a.jsx)("p",{className:"text-sm text-slate-300",children:"There are currently no tasks preferences."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z5,{onDragEnd:e=>{if(!e.destination||e.destination.index===e.source.index)return;let s=Array.from(E),[t]=s.splice(e.source.index,1);s.splice(e.destination.index,0,t),P(s)},children:(0,a.jsxs)("table",{className:"w-2/3 divide-y-2 divide-slate-600 border border-slate-600",children:[(0,a.jsx)("thead",{className:"bg-slate-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)(x.Z,{children:"Rank"}),(0,a.jsx)(x.Z,{children:"Task"}),(0,a.jsx)(x.Z,{})]})}),(0,a.jsx)(m.bK,{droppableId:"table",children:e=>(0,a.jsxs)("tbody",{className:"divide-y divide-slate-600",ref:e.innerRef,...e.droppableProps,children:[E.map((e,s)=>(0,a.jsx)(m._l,{draggableId:e.toString(),index:s,children:(t,n)=>(0,a.jsx)(v,{rank:s+1,task:b.tasks.find(s=>s.id===parseInt(e)),onRemove:H,provided:t,snapshot:n})},e.toString())),e.placeholder]})})]})}),(0,a.jsx)("p",{className:"mt-8 text-sm text-slate-500",children:"Click and drag tasks into preference order."})]})})]}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),u<4?p(u+1):d(y,R,E,Z)},className:"mt-12 border py-2 px-2 hover:underline",children:4===u?h:"Continue"})]})]})}function j(e){let{category:s,categories:t,onSave:l,onRemove:d}=e,[x,o]=(0,i.useState)(!1),[m,h]=(0,i.useState)(s.percentage);return(0,a.jsxs)("div",{className:"flex items-center justify-between border px-6 py-4",children:[(0,a.jsx)("p",{children:t.find(e=>e.id===parseInt(s.id)).name}),x?(0,a.jsxs)("div",{className:"inline-flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Z,{className:"block",width:"w-28",value:m,onChange:e=>h(e.target.value)}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 mt-1 flex items-center pr-3",children:(0,a.jsx)("span",{className:"text-sm text-slate-400",children:"%"})})]}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),l(s.id,m),o(!1)},children:(0,a.jsx)(r,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),d(s.id)},children:(0,a.jsx)(c,{className:"h-5 w-5"})})]}):(0,a.jsxs)("button",{className:"text-sm underline",onClick:e=>o(!0),children:[s.percentage,"%"]})]})}function f(e){let{task:s,isDisallowed:t,onToggle:n}=e;return(0,a.jsxs)("tr",{children:[(0,a.jsxs)(d.Z,{className:"flex flex-col items-start space-y-1",children:[(0,a.jsx)("p",{children:s.name}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:s.description})]}),(0,a.jsx)(d.Z,{children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("button",{className:"text-sm underline",onClick:e=>{e.preventDefault(),n(s.id)},children:t?"No":"Yes"})})})]})}function v(e){let{rank:s,task:t,onRemove:n,provided:l,snapshot:i}=e;return(0,a.jsxs)("tr",{ref:l.innerRef,className:i.isDragging?"table":"",...l.draggableProps,...l.dragHandleProps,children:[(0,a.jsx)(d.Z,{className:"w-24",children:(0,a.jsx)("span",{className:"bg-slate-800 py-1 px-2 text-xs font-medium uppercase tracking-wider",children:(0,a.jsx)("code",{children:s})})}),(0,a.jsxs)(d.Z,{className:"flex flex-col items-start space-y-1",children:[(0,a.jsx)("p",{children:t.name}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:t.description})]}),(0,a.jsx)(d.Z,{children:(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{className:"text-sm hover:underline",onClick:e=>{e.preventDefault(),n(t.id)},children:"Remove"})})})]})}function N(e){let{id:s,children:t,currentStep:n}=e,l=s<=n;return(0,a.jsxs)("div",{className:"flex-1 border-t-4 ".concat(l?"border-slate-400":"border-slate-600"," py-4"),children:[(0,a.jsxs)("p",{className:"text-sm font-medium ".concat(l?"text-slate-400":"text-slate-500"),children:["Step ",s]}),(0,a.jsx)("p",{className:"font-medium ".concat(l?"text-slate-300":"text-slate-400"),children:t})]})}}}]);